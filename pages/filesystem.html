<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Archivos - Amazon Linux CLI</title>
    <link rel="stylesheet" href="../styles.css">
</head>
<body>
    <header>
        <h1>üìÅ Sistema de Archivos y Navegaci√≥n</h1>
        <p class="subtitle">Domina todos los comandos de gesti√≥n de archivos en Amazon Linux</p>
        <nav class="main-nav">
            <a href="../index.html">üè† Inicio</a>
            <a href="filesystem.html">üìÅ Sistema de Archivos</a>
            <a href="packages.html">üì¶ Paquetes</a>
            <a href="users.html">üë• Usuarios</a>
            <a href="processes.html">‚öôÔ∏è Procesos</a>
            <a href="networking.html">üåê Redes</a>
            <a href="simulator.html">üíª Simulador</a>
        </nav>
    </header>
    <main>
        <section id="intro">
            <h2>Navegaci√≥n y Gesti√≥n de Archivos</h2>
            <p>El sistema de archivos de Amazon Linux sigue la estructura jer√°rquica FHS (Filesystem Hierarchy Standard). Todo comienza desde la ra√≠z <code>/</code> y se organiza en directorios especializados.</p>
            <div class="info-box">
                <strong>üí° Dato Importante:</strong> Amazon Linux usa ext4 y xfs como sistemas de archivos predeterminados. Conocer estos comandos te permite gestionar instancias EC2 eficientemente.
            </div>
        </section>

        <section id="navigation">
            <h2>Comandos de Navegaci√≥n B√°sica</h2>
            <table>
                <thead>
                    <tr>
                        <th>Comando</th>
                        <th>Descripci√≥n</th>
                        <th>Ejemplos</th>
                        <th>Opciones Clave</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>pwd</code></td>
                        <td>Muestra el directorio actual (Print Working Directory)</td>
                        <td><code>pwd</code><br><code>pwd -P</code> (ruta f√≠sica sin symlinks)</td>
                        <td>-P (f√≠sica), -L (l√≥gica)</td>
                    </tr>
                    <tr>
                        <td><code>cd</code></td>
                        <td>Cambia de directorio (Change Directory)</td>
                        <td><code>cd /var/log</code><br><code>cd ~</code> (ir a HOME)<br><code>cd -</code> (directorio anterior)<br><code>cd ..</code> (subir un nivel)</td>
                        <td>~ (home), - (anterior), .. (padre)</td>
                    </tr>
                    <tr>
                        <td><code>ls</code></td>
                        <td>Lista archivos y directorios</td>
                        <td><code>ls -la</code> (detallado + ocultos)<br><code>ls -lh</code> (tama√±os legibles)<br><code>ls -lt</code> (ordenado por tiempo)<br><code>ls -lS</code> (ordenado por tama√±o)</td>
                        <td>-l (largo), -a (todos), -h (humano), -t (tiempo), -r (reverso), -R (recursivo)</td>
                    </tr>
                    <tr>
                        <td><code>tree</code></td>
                        <td>Muestra estructura de directorios en √°rbol</td>
                        <td><code>tree</code><br><code>tree -L 2</code> (2 niveles)<br><code>tree -d</code> (solo directorios)</td>
                        <td>-L (nivel), -d (dirs), -a (todos)</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section id="file-operations">
            <h2>Creaci√≥n y Manipulaci√≥n de Archivos</h2>
            <table>
                <thead>
                    <tr>
                        <th>Comando</th>
                        <th>Descripci√≥n</th>
                        <th>Ejemplos</th>
                        <th>Uso Com√∫n en AWS</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>touch</code></td>
                        <td>Crea archivo vac√≠o o actualiza timestamp</td>
                        <td><code>touch archivo.txt</code><br><code>touch -t 202310221500 file</code> (timestamp espec√≠fico)</td>
                        <td>Crear archivos de configuraci√≥n, logs vac√≠os</td>
                    </tr>
                    <tr>
                        <td><code>mkdir</code></td>
                        <td>Crea directorios</td>
                        <td><code>mkdir directorio</code><br><code>mkdir -p /path/to/deep/dir</code> (crea padres)<br><code>mkdir -m 755 dir</code> (con permisos)</td>
                        <td>Organizar logs, datos de aplicaciones</td>
                    </tr>
                    <tr>
                        <td><code>cp</code></td>
                        <td>Copia archivos y directorios</td>
                        <td><code>cp origen destino</code><br><code>cp -r dir1 dir2</code> (recursivo)<br><code>cp -p file new</code> (preserva atributos)<br><code>cp -u src dst</code> (solo si m√°s nuevo)</td>
                        <td>Backup de configs, copiar datos entre vol√∫menes EBS</td>
                    </tr>
                    <tr>
                        <td><code>mv</code></td>
                        <td>Mueve o renombra archivos</td>
                        <td><code>mv viejo nuevo</code><br><code>mv archivo /path/</code><br><code>mv -i file dest</code> (interactivo)<br><code>mv -n</code> (no sobrescribir)</td>
                        <td>Reorganizar logs, renombrar configs</td>
                    </tr>
                    <tr>
                        <td><code>rm</code></td>
                        <td>Elimina archivos y directorios</td>
                        <td><code>rm archivo</code><br><code>rm -r directorio</code> (recursivo)<br><code>rm -f</code> (forzar)<br><code>rm -i</code> (interactivo)</td>
                        <td>Limpiar logs antiguos, eliminar temporales</td>
                    </tr>
                    <tr>
                        <td><code>rmdir</code></td>
                        <td>Elimina directorios vac√≠os</td>
                        <td><code>rmdir dir_vacio</code><br><code>rmdir -p a/b/c</code> (elimina jerarqu√≠a vac√≠a)</td>
                        <td>Limpiar estructuras de directorios vac√≠as</td>
                    </tr>
                </tbody>
            </table>
            <div class="danger-box">
                <strong>‚ö†Ô∏è PRECAUCI√ìN:</strong> <code>rm -rf /</code> puede destruir todo el sistema. Siempre verifica dos veces antes de usar <code>rm -rf</code>. En EC2, esto podr√≠a eliminar datos cr√≠ticos de tu instancia.
            </div>
        </section>

        <section id="viewing">
            <h2>Visualizaci√≥n de Contenido</h2>
            <table>
                <thead>
                    <tr>
                        <th>Comando</th>
                        <th>Descripci√≥n</th>
                        <th>Ejemplos</th>
                        <th>Cu√°ndo Usar</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>cat</code></td>
                        <td>Muestra contenido completo de archivo</td>
                        <td><code>cat archivo.txt</code><br><code>cat file1 file2 > combined</code> (concatenar)<br><code>cat -n file</code> (con n√∫meros de l√≠nea)</td>
                        <td>Archivos peque√±os, configs</td>
                    </tr>
                    <tr>
                        <td><code>less</code></td>
                        <td>Visualizador paginado (recomendado)</td>
                        <td><code>less archivo</code><br><code>less +F file</code> (modo follow)<br>Navegaci√≥n: espacio (adelante), b (atr√°s), /b√∫squeda, q (salir)</td>
                        <td>Logs grandes, documentaci√≥n</td>
                    </tr>
                    <tr>
                        <td><code>more</code></td>
                        <td>Visualizador paginado b√°sico</td>
                        <td><code>more archivo</code></td>
                        <td>Preferir <code>less</code> en su lugar</td>
                    </tr>
                    <tr>
                        <td><code>head</code></td>
                        <td>Muestra primeras l√≠neas de archivo</td>
                        <td><code>head archivo</code> (10 l√≠neas default)<br><code>head -n 20 file</code> (20 l√≠neas)<br><code>head -c 100 file</code> (100 bytes)</td>
                        <td>Ver inicio de logs, headers de CSV</td>
                    </tr>
                    <tr>
                        <td><code>tail</code></td>
                        <td>Muestra √∫ltimas l√≠neas de archivo</td>
                        <td><code>tail archivo</code><br><code>tail -n 50 file</code> (50 l√≠neas)<br><code>tail -f log</code> (seguir en tiempo real)<br><code>tail -F log</code> (sigue rotaci√≥n)</td>
                        <td>Monitorear logs en tiempo real</td>
                    </tr>
                    <tr>
                        <td><code>tac</code></td>
                        <td>Cat invertido (muestra de abajo hacia arriba)</td>
                        <td><code>tac archivo</code></td>
                        <td>Ver logs en orden inverso</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section id="search">
            <h2>B√∫squeda de Archivos</h2>
            <table>
                <thead>
                    <tr>
                        <th>Comando</th>
                        <th>Descripci√≥n</th>
                        <th>Ejemplos Avanzados</th>
                        <th>Casos de Uso AWS</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>find</code></td>
                        <td>B√∫squeda potente de archivos</td>
                        <td><code>find /var -name "*.log"</code><br><code>find . -type f -size +100M</code> (>100MB)<br><code>find . -mtime -7</code> (modificados √∫ltimos 7 d√≠as)<br><code>find . -user ec2-user</code><br><code>find . -perm 644</code><br><code>find . -name "*.tmp" -delete</code></td>
                        <td>Encontrar logs antiguos, archivos grandes que consumen EBS</td>
                    </tr>
                    <tr>
                        <td><code>locate</code></td>
                        <td>B√∫squeda r√°pida por base de datos</td>
                        <td><code>locate archivo</code><br><code>locate -i name</code> (case-insensitive)<br><code>updatedb</code> (actualizar BD)</td>
                        <td>B√∫squeda r√°pida de binarios, configs</td>
                    </tr>
                    <tr>
                        <td><code>which</code></td>
                        <td>Encuentra ubicaci√≥n de ejecutables</td>
                        <td><code>which python3</code><br><code>which -a python</code> (todas las rutas)</td>
                        <td>Verificar qu√© versi√≥n de comando se ejecuta</td>
                    </tr>
                    <tr>
                        <td><code>whereis</code></td>
                        <td>Localiza binarios, fuentes y manuales</td>
                        <td><code>whereis nginx</code><br><code>whereis -b python</code> (solo binarios)</td>
                        <td>Encontrar todos los archivos relacionados con un programa</td>
                    </tr>
                </tbody>
            </table>
            <div class="success-box">
                <strong>üí° Tip Pro:</strong> Combina <code>find</code> con <code>xargs</code>:<br>
                <code>find /var/log -name "*.log" -mtime +30 | xargs rm</code> - Elimina logs de m√°s de 30 d√≠as
            </div>
        </section>

        <section id="permissions">
            <h2>Permisos y Propiedades</h2>
            <table>
                <thead>
                    <tr>
                        <th>Comando</th>
                        <th>Descripci√≥n</th>
                        <th>Ejemplos Detallados</th>
                        <th>Permisos Comunes</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>chmod</code></td>
                        <td>Cambia permisos de archivos</td>
                        <td><code>chmod 755 script.sh</code><br><code>chmod u+x file</code> (a√±ade ejecuci√≥n al usuario)<br><code>chmod g-w file</code> (quita escritura al grupo)<br><code>chmod -R 644 dir/</code> (recursivo)</td>
                        <td>755 (rwxr-xr-x), 644 (rw-r--r--), 600 (rw-------), 777 (rwxrwxrwx)</td>
                    </tr>
                    <tr>
                        <td><code>chown</code></td>
                        <td>Cambia propietario y grupo</td>
                        <td><code>chown ec2-user file</code><br><code>chown ec2-user:ec2-user file</code><br><code>chown -R user:group dir/</code><br><code>chown --reference=ref file</code></td>
                        <td>Asignar archivos a usuarios de aplicaci√≥n</td>
                    </tr>
                    <tr>
                        <td><code>chgrp</code></td>
                        <td>Cambia solo el grupo</td>
                        <td><code>chgrp developers file</code><br><code>chgrp -R www-data /var/www</code></td>
                        <td>Compartir archivos entre usuarios del mismo grupo</td>
                    </tr>
                    <tr>
                        <td><code>umask</code></td>
                        <td>Establece permisos por defecto</td>
                        <td><code>umask</code> (ver actual)<br><code>umask 022</code> (archivos 644, dirs 755)<br><code>umask 077</code> (archivos 600, dirs 700)</td>
                        <td>Controlar seguridad de nuevos archivos</td>
                    </tr>
                    <tr>
                        <td><code>stat</code></td>
                        <td>Muestra informaci√≥n detallada de archivo</td>
                        <td><code>stat archivo</code><br><code>stat -f /</code> (info del filesystem)</td>
                        <td>Ver timestamps completos, inodes, permisos octales</td>
                    </tr>
                </tbody>
            </table>
            <div class="info-box">
                <strong>üìñ Referencia de Permisos:</strong><br>
                r (read) = 4, w (write) = 2, x (execute) = 1<br>
                Ejemplo: 755 = rwxr-xr-x = Usuario(7=4+2+1), Grupo(5=4+1), Otros(5=4+1)
            </div>
        </section>

        <section id="links">
            <h2>Enlaces Simb√≥licos y Duros</h2>
            <table>
                <thead>
                    <tr>
                        <th>Comando</th>
                        <th>Descripci√≥n</th>
                        <th>Ejemplos</th>
                        <th>Diferencias</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>ln -s</code></td>
                        <td>Crea enlace simb√≥lico (symlink)</td>
                        <td><code>ln -s /path/original /path/link</code><br><code>ln -sf target link</code> (forzar)</td>
                        <td>Como acceso directo, puede cruzar filesystems, se rompe si se mueve el original</td>
                    </tr>
                    <tr>
                        <td><code>ln</code></td>
                        <td>Crea enlace duro (hard link)</td>
                        <td><code>ln original hardlink</code></td>
                        <td>Misma data en disco, no puede cruzar filesystems, no se rompe si se mueve</td>
                    </tr>
                    <tr>
                        <td><code>readlink</code></td>
                        <td>Lee el destino de un symlink</td>
                        <td><code>readlink link</code><br><code>readlink -f link</code> (ruta completa)</td>
                        <td>√ötil para scripts que siguen enlaces</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section id="compression">
            <h2>Compresi√≥n y Archivado</h2>
            <table>
                <thead>
                    <tr>
                        <th>Comando</th>
                        <th>Descripci√≥n</th>
                        <th>Ejemplos Completos</th>
                        <th>Uso en AWS</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>tar</code></td>
                        <td>Archivador de archivos</td>
                        <td><code>tar -czf archivo.tar.gz dir/</code> (crear gzip)<br><code>tar -xzf archivo.tar.gz</code> (extraer gzip)<br><code>tar -cjf archivo.tar.bz2 dir/</code> (bzip2)<br><code>tar -tf archivo.tar.gz</code> (listar contenido)<br><code>tar -xzf file.tar.gz -C /destino</code></td>
                        <td>Backup antes de snapshot EBS, empaquetar aplicaciones</td>
                    </tr>
                    <tr>
                        <td><code>gzip</code></td>
                        <td>Comprime archivos</td>
                        <td><code>gzip archivo</code><br><code>gzip -d archivo.gz</code> (descomprimir)<br><code>gzip -k archivo</code> (mantener original)<br><code>gzip -9 archivo</code> (m√°xima compresi√≥n)</td>
                        <td>Comprimir logs antes de S3</td>
                    </tr>
                    <tr>
                        <td><code>gunzip</code></td>
                        <td>Descomprime gzip</td>
                        <td><code>gunzip archivo.gz</code></td>
                        <td>Equivalente a <code>gzip -d</code></td>
                    </tr>
                    <tr>
                        <td><code>bzip2</code></td>
                        <td>Compresi√≥n m√°s eficiente</td>
                        <td><code>bzip2 archivo</code><br><code>bzip2 -d archivo.bz2</code></td>
                        <td>Mayor compresi√≥n que gzip, m√°s lento</td>
                    </tr>
                    <tr>
                        <td><code>zip</code></td>
                        <td>Comprime en formato ZIP</td>
                        <td><code>zip archivo.zip files</code><br><code>zip -r archivo.zip dir/</code> (recursivo)</td>
                        <td>Compatibilidad con Windows</td>
                    </tr>
                    <tr>
                        <td><code>unzip</code></td>
                        <td>Descomprime ZIP</td>
                        <td><code>unzip archivo.zip</code><br><code>unzip -l archivo.zip</code> (listar)<br><code>unzip archivo.zip -d /destino</code></td>
                        <td>Extraer archivos de S3 en ZIP</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section id="disk-usage">
            <h2>Uso de Disco y Espacio</h2>
            <table>
                <thead>
                    <tr>
                        <th>Comando</th>
                        <th>Descripci√≥n</th>
                        <th>Ejemplos</th>
                        <th>Monitoreo en EC2</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>df</code></td>
                        <td>Muestra espacio en filesystems</td>
                        <td><code>df -h</code> (formato humano)<br><code>df -i</code> (inodes)<br><code>df -T</code> (tipo de filesystem)</td>
                        <td>Monitorear capacidad de vol√∫menes EBS</td>
                    </tr>
                    <tr>
                        <td><code>du</code></td>
                        <td>Uso de disco por directorio</td>
                        <td><code>du -sh directorio</code> (resumen)<br><code>du -h --max-depth=1</code> (1 nivel)<br><code>du -ah | sort -rh | head -20</code> (top 20)</td>
                        <td>Encontrar qu√© consume espacio en EBS</td>
                    </tr>
                    <tr>
                        <td><code>ncdu</code></td>
                        <td>Analizador interactivo de disco</td>
                        <td><code>ncdu /var</code> (requiere instalaci√≥n)</td>
                        <td>An√°lisis visual de uso de disco</td>
                    </tr>
                </tbody>
            </table>
            <div class="warning-box">
                <strong>‚ö†Ô∏è Alerta EBS:</strong> Monitorea el espacio regularmente con <code>df -h</code>. Un volumen EBS lleno puede hacer que tu instancia EC2 se vuelva inaccesible.
            </div>
        </section>

        <section id="misc">
            <h2>Comandos Miscel√°neos √ötiles</h2>
            <table>
                <thead>
                    <tr>
                        <th>Comando</th>
                        <th>Descripci√≥n</th>
                        <th>Ejemplos</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>file</code></td>
                        <td>Determina tipo de archivo</td>
                        <td><code>file archivo</code><br><code>file *</code> (todos en directorio)</td>
                    </tr>
                    <tr>
                        <td><code>basename</code></td>
                        <td>Extrae nombre de archivo de ruta</td>
                        <td><code>basename /path/to/file.txt</code> ‚Üí file.txt</td>
                    </tr>
                    <tr>
                        <td><code>dirname</code></td>
                        <td>Extrae directorio de ruta</td>
                        <td><code>dirname /path/to/file.txt</code> ‚Üí /path/to</td>
                    </tr>
                    <tr>
                        <td><code>realpath</code></td>
                        <td>Muestra ruta absoluta</td>
                        <td><code>realpath archivo</code><br><code>realpath ../dir</code></td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section id="practice">
            <h2>üéØ Ejercicio Pr√°ctico</h2>
            <div class="success-box">
                <h3>Desaf√≠o: Organiza un Sistema de Logs</h3>
                <ol>
                    <li>Crea estructura: <code>mkdir -p /tmp/logs/{app,system,nginx}</code></li>
                    <li>Crea logs de ejemplo: <code>touch /tmp/logs/app/app{1..5}.log</code></li>
                    <li>Encuentra logs grandes: <code>find /var/log -type f -size +10M</code></li>
                    <li>Comprime logs antiguos: <code>find /var/log -name "*.log" -mtime +7 -exec gzip {} \;</code></li>
                    <li>Verifica espacio: <code>du -sh /var/log</code></li>
                </ol>
            </div>
        </section>
    </main>
    <footer>
        <p>üí™ Domina el sistema de archivos de Amazon Linux</p>
    </footer>
    <script src="../menu.js"></script>
</body>
</html>
